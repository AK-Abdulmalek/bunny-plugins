(function(a,n,r,c,d,h,y){"use strict";const m=[];function u(e,o,t){return function(){try{return t.apply(this,arguments)}catch(i){console.error(`Error while running ${e} callback for ${o}:`,i)}}}const l=function(e,o,t,i){m.push(c.before(e,o,u("before",e,t),i))},f=function(e,o,t,i){m.push(c.instead(e,o,u("instead",e,t),i))},j=r.findByProps("canUseEmojisEverywhere");var v=[f("canUseEmojisEverywhere",j,function(){return!0}),f("canUseAnimatedEmojis",j,function(){return!0})];const{getCustomEmojiById:p}=r.findByStoreName("EmojiStore"),{getGuildId:z}=r.findByStoreName("SelectedGuildStore"),w=/<a?:(\w+):(\d+)>/i;function b(e,o){const t=e.matchAll(/<a?:(\w+):(\d+)>/gi),i=[];for(const E of t){const s=p(E[2]);(s.guildId!=z()||s.animated)&&(e=e.replace(E[0],""),i.push(`${s.url.split("?")[0]}?size=${o}`))}return{newContent:e.trim(),extractedEmojis:i}}function g(e){if(!e.content.match(w))return;const{newContent:o,extractedEmojis:t}=b(e.content,n.storage.emojiSize);e.content=o,t.length>0&&(e.content+=`
`+t.join(`
`)),e.invalidEmojis=[]}const R=r.findByProps("sendMessage","receiveMessage"),$=r.findByProps("uploadLocalFiles");var B=[l("sendMessage",R,function(e){return g(e[1])}),l("uploadLocalFiles",$,function(e){return g(e[0].parsedMessage)})];const{FormSection:S,FormRadioRow:P}=h.Forms,F={Tiny:16,Small:32,Medium:48,Large:64,Huge:96,Jumbo:128},I="https://cdn.discordapp.com/emojis/1105406110724268075.webp";function M(){return y.useProxy(n.storage),React.createElement(d.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(S,{title:"Emoji Size",titleStyleType:"no_border"},Object.entries(F).map(function(e){let[o,t]=e;return React.createElement(P,{label:o,subLabel:t,selected:n.storage.emojiSize===t,onPress:function(){n.storage.emojiSize=t}})})),React.createElement(S,{title:"Preview"},React.createElement(d.ReactNative.Image,{source:{uri:`${I}?size=${n.storage.emojiSize}`,width:n.storage.emojiSize,height:n.storage.emojiSize}})))}n.storage.emojiSize??=48,typeof n.storage.emojiSize=="string"&&(n.storage.emojiSize=parseInt(n.storage.emojiSize));const U=[...v,...B],C=function(){return U.forEach(function(e){return e()})};return a.onUnload=C,a.settings=M,a})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.metro.common,vendetta.ui.components,vendetta.storage);
