(function(a,n,r,c,m,g,S){"use strict";const u=r.findByProps("canUseEmojisEverywhere");var h=[c.instead("canUseEmojisEverywhere",u,function(){return!0}),c.instead("canUseAnimatedEmojis",u,function(){return!0})];const p=[];function E(e,o,t){return function(){try{return t.apply(this,arguments)}catch(i){console.error(`Error while running ${e} callback for ${o}:`,i)}}}const l=function(e,o,t,i){p.push(c.before(e,o,E("before",e,t),i))},{getCustomEmojiById:y}=r.findByStoreName("EmojiStore"),{getGuildId:v}=r.findByStoreName("SelectedGuildStore"),z=/<a?:(\w+):(\d+)>/i;function w(e,o){const t=e.matchAll(/<a?:(\w+):(\d+)>/gi),i=[];for(const s of t){const d=y(s[2]);(d.guildId!=v()||d.animated)&&(e=e.replace(s[0],""),d.animated?i.push(`https://cdn.discordapp.com/emojis/${s[2]}.gif?size=${o}`):i.push(`https://cdn.discordapp.com/emojis/${s[2]}.webp?size=${o}`))}return{newContent:e.trim(),extractedEmojis:i}}function f(e){if(!e.content.match(z))return;const{newContent:o,extractedEmojis:t}=w(e.content,n.storage.emojiSize);e.content=o,t.length>0&&(e.content+=`
`+t.join(`
`)),e.invalidEmojis=[]}const b=r.findByProps("sendMessage","receiveMessage"),$=r.findByProps("uploadLocalFiles");var R=[l("sendMessage",b,function(e){return f(e[1])}),l("uploadLocalFiles",$,function(e){return f(e[0].parsedMessage)})];const{FormSection:j,FormRadioRow:B}=g.Forms,P={Tiny:16,Small:32,Medium:48,Large:64,Huge:96,Jumbo:128},F="https://cdn.discordapp.com/emojis/926602689213767680.webp";function I(){return S.useProxy(n.storage),React.createElement(m.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(j,{title:"Emoji Size",titleStyleType:"no_border"},Object.entries(P).map(function(e){let[o,t]=e;return React.createElement(B,{label:o,subLabel:t,selected:n.storage.emojiSize===t,onPress:function(){n.storage.emojiSize=t}})})),React.createElement(j,{title:"Preview"},React.createElement(m.ReactNative.Image,{source:{uri:`${F}?size=${n.storage.emojiSize}`,width:n.storage.emojiSize,height:n.storage.emojiSize}})))}n.storage.emojiSize??=48,typeof n.storage.emojiSize=="string"&&(n.storage.emojiSize=parseInt(n.storage.emojiSize));const M=[...h,...R],U=function(){return M.forEach(function(e){return e()})};return a.onUnload=U,a.settings=I,a})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.metro.common,vendetta.ui.components,vendetta.storage);
