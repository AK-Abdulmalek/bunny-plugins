(function(s,t,i,r,u,f,y,S){"use strict";const j=i.findByProps("canUseEmojisEverywhere");var h=[r.instead("canUseEmojisEverywhere",j,function(){return!0}),r.instead("canUseAnimatedEmojis",j,function(){return!0})];const{getCustomEmojiById:E}=i.findByStoreName("EmojiStore"),{getGuildId:v}=i.findByStoreName("SelectedGuildStore"),p=/<a?:(\w+):(\d+)>/i;function b(e,n){const o=e.matchAll(/<a?:(\w+):(\d+)>/gi),m=[];for(const a of o){const l=E(a[2]);if(l.guildId!=v()||l.animated){e=e.replace(a[0],"");var d="webp";l.animated&&(d="gif"),t.storage.hyperlink===!0?m.push(`[:${a[1]}:](https://cdn.discordapp.com/emojis/${a[2]}.${d}?size=${n})`):m.push(`https://cdn.discordapp.com/emojis/${a[2]}.${d}?size=${n}`)}}return{newContent:e.trim(),extractedEmojis:m}}function g(e){if(!e.content.match(p))return;const{newContent:n,extractedEmojis:o}=b(e.content,t.storage.emojiSize);e.content=n,o.length>0&&(t.storage.hyperlink===!0?e.content+=" "+o.join(" "):e.content+=`
`+o.join(`
`)),e.invalidEmojis=[]}const w=i.findByProps("sendMessage","receiveMessage"),z=i.findByProps("uploadLocalFiles");var R=[r.before("sendMessage",w,function(e){return g(e[1])}),r.before("uploadLocalFiles",z,function(e){return g(e[0].parsedMessage)})];const{FormSection:c,FormRadioRow:$,FormSwitchRow:k}=f.Forms,B={Tiny:16,Small:32,Medium:48,Large:64,Huge:96,Jumbo:128},F="https://cdn.discordapp.com/emojis/926602689213767680.webp";function I(){return y.useProxy(t.storage),React.createElement(u.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(c,{title:"Settings",titleStyleType:"no_border"},React.createElement(k,{label:"Hyperlink emoji",subLabel:"Hyperlinks emoji link to be less distractive",leading:React.createElement(f.Forms.FormIcon,{source:S.getAssetIDByName("ic_link")}),value:t.storage.hyperlink,onValueChange:function(){t.storage.hyperlink=!t.storage.hyperlink},note:""})),React.createElement(c,{title:"Emoji Size"},Object.entries(B).map(function(e){let[n,o]=e;return React.createElement($,{label:n,subLabel:o,selected:t.storage.emojiSize===o,onPress:function(){t.storage.emojiSize=o}})})),React.createElement(c,{title:"Preview"},React.createElement(u.ReactNative.Image,{source:{uri:`${F}?size=${t.storage.emojiSize}`,width:t.storage.emojiSize,height:t.storage.emojiSize}})))}t.storage.emojiSize??=48,t.storage.hyperlink??=!0,typeof t.storage.emojiSize=="string"&&(t.storage.emojiSize=parseInt(t.storage.emojiSize));const P=[...h,...R],C=function(){return P.forEach(function(e){return e()})};return s.onUnload=C,s.settings=I,s})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.metro.common,vendetta.ui.components,vendetta.storage,vendetta.ui.assets);
