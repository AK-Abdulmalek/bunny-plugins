(function(a,o,r,d,m,p,E){"use strict";const u=[];function l(e,n,t){return function(){try{return t.apply(this,arguments)}catch(i){console.error(`Error while running ${e} callback for ${n}:`,i)}}}const f=function(e,n,t,i){u.push(d.before(e,n,l("before",e,t),i))},j=function(e,n,t,i){u.push(d.instead(e,n,l("instead",e,t),i))},g=r.findByProps("canUseEmojisEverywhere");var y=[j("canUseEmojisEverywhere",g,function(){return!0}),j("canUseAnimatedEmojis",g,function(){return!0})];const{getCustomEmojiById:v}=r.findByStoreName("EmojiStore"),{getGuildId:z}=r.findByStoreName("SelectedGuildStore"),w=/<a?:(\w+):(\d+)>/i;function b(e,n){const t=e.matchAll(/<a?:(\w+):(\d+)>/gi),i=[];for(const s of t){const c=v(s[2]);(c.guildId!=z()||c.animated)&&(e=e.replace(s[0],""),c.animated?i.push(`https://cdn.discordapp.com/emojis/${s[2]}.gif?size=${n}`):i.push(`https://cdn.discordapp.com/emojis/${s[2]}.webp?size=${n}`))}return{newContent:e.trim(),extractedEmojis:i}}function S(e){if(!e.content.match(w))return;const{newContent:n,extractedEmojis:t}=b(e.content,o.storage.emojiSize);e.content=n,t.length>0&&(e.content+=`
`+t.join(`
`)),e.invalidEmojis=[]}const $=r.findByProps("sendMessage","receiveMessage"),R=r.findByProps("uploadLocalFiles");var B=[f("sendMessage",$,function(e){return S(e[1])}),f("uploadLocalFiles",R,function(e){return S(e[0].parsedMessage)})];const{FormSection:h,FormRadioRow:P}=p.Forms,F={Tiny:16,Small:32,Medium:48,Large:64,Huge:96,Jumbo:128},I="https://cdn.discordapp.com/emojis/926602689213767680.webp";function M(){return E.useProxy(o.storage),React.createElement(m.ReactNative.ScrollView,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(h,{title:"Emoji Size",titleStyleType:"no_border"},Object.entries(F).map(function(e){let[n,t]=e;return React.createElement(P,{label:n,subLabel:t,selected:o.storage.emojiSize===t,onPress:function(){o.storage.emojiSize=t}})})),React.createElement(h,{title:"Preview"},React.createElement(m.ReactNative.Image,{source:{uri:`${I}?size=${o.storage.emojiSize}`,width:o.storage.emojiSize,height:o.storage.emojiSize}})))}o.storage.emojiSize??=48,typeof o.storage.emojiSize=="string"&&(o.storage.emojiSize=parseInt(o.storage.emojiSize));const U=[...y,...B],C=function(){return U.forEach(function(e){return e()})};return a.onUnload=C,a.settings=M,a})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.metro.common,vendetta.ui.components,vendetta.storage);
