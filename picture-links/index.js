(function(f,r,p,v){"use strict";const{Pressable:g}=r.findByProps("Button","Text","View"),y=r.findByName("ProfileBanner",!1),m=r.findByName("HeaderAvatar",!1),{openMediaModal:B}=r.findByProps("openMediaModal"),{hideActionSheet:S}=r.findByProps("hideActionSheet"),{getChannelId:b}=r.findByStoreName("SelectedChannelStore"),{getGuildId:w}=r.findByStoreName("SelectedGuildStore");function I(t){return new Promise(function(n,e){v.ReactNative.Image.getSize(t,function(i,a){return n({width:i,height:a})},function(i){return e(i)})})}async function d(t,n){const{width:e,height:i}=await I(t);S(),B({initialSources:[{uri:t,sourceURI:t,width:e,height:i,guildId:w(),channelId:b()}],initialIndex:0,originLayout:{width:0,height:0,x:n.pageX,y:n.pageY,resizeMode:"fill"}})}const P=p.after("default",m,function(t,n){let[{user:e,style:i,guildId:a}]=t;var o,u;const h=((o=e.guildMemberAvatars)===null||o===void 0?void 0:o[a])&&`https://cdn.discordapp.com/guilds/${a}/users/${e.id}/avatars/${e.guildMemberAvatars[a]}.png?size=4096`,l=e==null||(u=e.getAvatarURL)===null||u===void 0?void 0:u.call(e,!1,4096,!0);if(!l)return n;const z=typeof l=="number"?`https://cdn.discordapp.com/embed/avatars/${Number(BigInt(e.id)>>22n)%6}.png`:l?.replace(".webp",".png");return delete n.props.style,React.createElement(g,{onPress:function(c){let{nativeEvent:s}=c;return d(z,s)},onLongPress:function(c){let{nativeEvent:s}=c;return h&&d(h,s)},style:i},n)}),M=p.after("default",y,function(t,n){let[{bannerSource:e}]=t;if(typeof e?.uri!="string"||!n)return n;const i=e.uri.replace(/(?:\?size=\d{3,4})?$/,"?size=4096").replace(".webp",".png");return React.createElement(g,{onPress:function(a){let{nativeEvent:o}=a;return d(i,o)}},n)});function A(){P(),M()}return f.onUnload=A,f})({},vendetta.metro,vendetta.patcher,vendetta.metro.common);
