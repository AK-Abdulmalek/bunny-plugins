(function(m,a,s,B){"use strict";const{Pressable:f}=a.findByProps("Button","Text","View"),I=a.findByName("ProfileBanner",!1),E=a.findByName("HeaderAvatar",!1),{openMediaModal:P}=a.findByProps("openMediaModal"),{hideActionSheet:S}=a.findByProps("hideActionSheet"),{getChannelId:b}=a.findByStoreName("SelectedChannelStore"),{getGuildId:R}=a.findByStoreName("SelectedGuildStore");function $(r){return new Promise(function(t,e){B.ReactNative.Image.getSize(r,function(i,n){return t({width:i,height:n})},function(i){return e(i)})})}async function c(r,t){const{width:e,height:i}=await $(r);S(),P({initialSources:[{uri:r,sourceURI:r,width:e,height:i,guildId:R(),channelId:b()}],initialIndex:0,originLayout:{width:0,height:0,x:t.pageX,y:t.pageY,resizeMode:"fill"}})}const w=s.after("default",E,function(r,t){let[{user:e,style:i,guildId:n}]=r;var o,d,l,u="png";!((o=e.guildMemberAvatars)===null||o===void 0)&&o[n].includes("a_")&&(u="gif");const v=((d=e.guildMemberAvatars)===null||d===void 0?void 0:d[n])&&`https://cdn.discordapp.com/guilds/${n}/users/${e.id}/avatars/${e.guildMemberAvatars[n]}.${u}?size=4096`,g=e==null||(l=e.getAvatarURL)===null||l===void 0?void 0:l.call(e,!1,4096,!0);if(!g)return t;const M=typeof g=="number"?`https://cdn.discordapp.com/embed/avatars/${Number(BigInt(e.id)>>22n)%6}.png`:g?.replace(".webp",".png");return delete t.props.style,React.createElement(f,{onPress:function(h){let{nativeEvent:y}=h;return c(M,y)},onLongPress:function(h){let{nativeEvent:y}=h;return v&&c(v,y)},style:i},t)}),z=s.after("default",I,function(r,t){let[{bannerSource:e}]=r;if(typeof e?.uri!="string"||!t)return t;const i=e.uri.replace(/(?:\?size=\d{3,4})?$/,"?size=4096").replace(".webp",".png");return React.createElement(f,{onPress:function(n){let{nativeEvent:o}=n;return c(i,o)}},t)});var p;if(typeof a.findByName("GuildIcon").prototype.render<"u"){const r=a.findByName("GuildIcon");p=s.after("render",r.prototype,function(t,e){var i,n,o,d;if(((i=this.props)===null||i===void 0?void 0:i.size)!=="XLARGE")return;const l=(d=this.props)===null||d===void 0||(o=d.guild)===null||o===void 0||(n=o.getIconURL)===null||n===void 0?void 0:n.call(o,4096);return l?React.createElement(f,{onPress:function(u){let{nativeEvent:v}=u;return c(l,v)}},e):e})}else{const r=a.findByName("GuildIcon",!1);p=s.after("default",r,function(t,e){let[{size:i,guild:n}]=t;if(i!=="XLARGE"||n?.icon==null)return;var o="png";n?.icon.includes("a_")&&(o="gif");const d=`https://cdn.discordapp.com/icons/${n?.id}/${n?.icon}.${o}?size=4096`;return React.createElement(f,{onPress:function(l){let{nativeEvent:u}=l;return c(d,u)}},e)})}function A(){w(),z(),p()}return m.onUnload=A,m})({},vendetta.metro,vendetta.patcher,vendetta.metro.common);
