(function(m,a,f,I){"use strict";const{Pressable:v}=a.findByProps("Button","Text","View"),b=a.findByName("ProfileBanner",!1),E=a.findByName("HeaderAvatar",!1),{openMediaModal:P}=a.findByProps("openMediaModal"),{hideActionSheet:S}=a.findByProps("hideActionSheet"),{getChannelId:A}=a.findByStoreName("SelectedChannelStore"),{getGuildId:M}=a.findByStoreName("SelectedGuildStore");function R(r){return new Promise(function(t,e){I.ReactNative.Image.getSize(r,function(i,n){return t({width:i,height:n})},function(i){return e(i)})})}async function c(r,t){const{width:e,height:i}=await R(r);S(),P({initialSources:[{uri:r,sourceURI:r,width:e,height:i,guildId:M(),channelId:A()}],initialIndex:0,originLayout:{width:0,height:0,x:t.pageX,y:t.pageY,resizeMode:"fill"}})}const $=f.after("default",E,function(r,t){let[{user:e,style:i,guildId:n}]=r;var o,d,l,u="png";if(typeof((o=e.guildMemberAvatars)===null||o===void 0?void 0:o[n])=="string"){var s;!((s=e.guildMemberAvatars)===null||s===void 0)&&s[n].includes("a_")&&(u="gif")}const B=((d=e.guildMemberAvatars)===null||d===void 0?void 0:d[n])&&`https://cdn.discordapp.com/guilds/${n}/users/${e.id}/avatars/${e.guildMemberAvatars[n]}.${u}?size=4096`,g=e==null||(l=e.getAvatarURL)===null||l===void 0?void 0:l.call(e,!1,4096,!0);if(!g)return t;const N=typeof g=="number"?`https://cdn.discordapp.com/embed/avatars/${Number(BigInt(e.id)>>22n)%6}.png`:g?.replace(".webp",".png");return delete t.props.style,React.createElement(v,{onPress:function(h){let{nativeEvent:y}=h;return c(N,y)},onLongPress:function(h){let{nativeEvent:y}=h;return B&&c(B,y)},style:i},t)}),w=f.after("default",b,function(r,t){let[{bannerSource:e}]=r;if(typeof e?.uri!="string"||!t)return t;const i=e.uri.replace(/(?:\?size=\d{3,4})?$/,"?size=4096").replace(".webp",".png");return React.createElement(v,{onPress:function(n){let{nativeEvent:o}=n;return c(i,o)}},t)});var p;if(typeof a.findByName("GuildIcon").prototype.render<"u"){const r=a.findByName("GuildIcon");p=f.after("render",r.prototype,function(t,e){var i,n,o,d;if(((i=this.props)===null||i===void 0?void 0:i.size)!=="XLARGE")return;const l=(d=this.props)===null||d===void 0||(o=d.guild)===null||o===void 0||(n=o.getIconURL)===null||n===void 0?void 0:n.call(o,4096);return l?React.createElement(v,{onPress:function(u){let{nativeEvent:s}=u;return c(l,s)}},e):e})}else{const r=a.findByName("GuildIcon",!1);p=f.after("default",r,function(t,e){let[{size:i,guild:n}]=t;if(i!=="XLARGE"||n?.icon==null)return;var o="png";n?.icon.includes("a_")&&(o="gif");const d=`https://cdn.discordapp.com/icons/${n?.id}/${n?.icon}.${o}?size=4096`;return React.createElement(v,{onPress:function(l){let{nativeEvent:u}=l;return c(d,u)}},e)})}function z(){$(),w(),p()}return m.onUnload=z,m})({},vendetta.metro,vendetta.patcher,vendetta.metro.common);
