(function(v,a,l,h){"use strict";const{Pressable:s}=a.findByProps("Button","Text","View"),y=a.findByName("ProfileBanner",!1),m=a.findByName("HeaderAvatar",!1),B=a.findByName("GuildIcon",!1),{openMediaModal:S}=a.findByProps("openMediaModal"),{hideActionSheet:P}=a.findByProps("hideActionSheet"),{getChannelId:b}=a.findByStoreName("SelectedChannelStore"),{getGuildId:I}=a.findByStoreName("SelectedGuildStore");function w(i){return new Promise(function(n,e){h.ReactNative.Image.getSize(i,function(t,r){return n({width:t,height:r})},function(t){return e(t)})})}async function u(i,n){const{width:e,height:t}=await w(i);P(),S({initialSources:[{uri:i,sourceURI:i,width:e,height:t,guildId:I(),channelId:b()}],initialIndex:0,originLayout:{width:0,height:0,x:n.pageX,y:n.pageY,resizeMode:"fill"}})}const E=l.after("default",m,function(i,n){let[{user:e,style:t,guildId:r}]=i;var d,o;const c=((d=e.guildMemberAvatars)===null||d===void 0?void 0:d[r])&&`https://cdn.discordapp.com/guilds/${r}/users/${e.id}/avatars/${e.guildMemberAvatars[r]}.png?size=4096`,f=e==null||(o=e.getAvatarURL)===null||o===void 0?void 0:o.call(e,!1,4096,!0);if(!f)return n;const M=typeof f=="number"?`https://cdn.discordapp.com/embed/avatars/${Number(BigInt(e.id)>>22n)%6}.png`:f?.replace(".webp",".png");return delete n.props.style,React.createElement(s,{onPress:function(g){let{nativeEvent:p}=g;return u(M,p)},onLongPress:function(g){let{nativeEvent:p}=g;return c&&u(c,p)},style:t},n)}),$=l.after("default",y,function(i,n){let[{bannerSource:e}]=i;if(typeof e?.uri!="string"||!n)return n;const t=e.uri.replace(/(?:\?size=\d{3,4})?$/,"?size=4096").replace(".webp",".png");return React.createElement(s,{onPress:function(r){let{nativeEvent:d}=r;return u(t,d)}},n)});var z=l.after("default",B,function(i,n){let[{size:e,guild:t}]=i;if(e!=="XLARGE")return;var r="png";t?.icon.includes("a_")&&(r="gif");const d=`https://cdn.discordapp.com/icons/${t?.id}/${t?.icon}.${r}?size=4096`;return React.createElement(s,{onPress:function(o){let{nativeEvent:c}=o;return u(d,c)}},n)});function A(){E(),$(),z()}return v.onUnload=A,v})({},vendetta.metro,vendetta.patcher,vendetta.metro.common);
