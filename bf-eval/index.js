(function(r,u,l){"use strict";function c(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function o(a,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}function f(a,e,i){return e&&o(a.prototype,e),i&&o(a,i),a}let d=function(){function a(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:3e4;if(c(this,a),!e)throw new Error("No program to interpret.");this.program=e,this.input=i,this.size=t,this.array=new Array(t).fill(0),this.p=0,this.i=0,this.done=!1,this.events={},this.loops={},this.mod=function(s,n){return n+=1,(s%n+n)%n}}return f(a,[{key:"on",value:function(e,i){this.events[e]||(this.events[e]=[]),this.events[e].push(i)}},{key:"emit",value:function(e){for(var i=arguments.length,t=new Array(i>1?i-1:0),s=1;s<i;s++)t[s-1]=arguments[s];if(this.events[e])for(let n in this.events[e])this.events[e][n](...t)}},{key:"step",value:function(){let e=this.program,i=!1;if(this.done||e[this.i]===void 0){this.done||this.emit("done"),this.done=!0;return}switch(e[this.i]){case">":this.p++,this.p=this.mod(this.p,this.size);break;case"<":this.p--,this.p=this.mod(this.p,this.size);break;case"+":this.array[this.p]=this.array[this.p]+1&255;break;case"-":this.array[this.p]=this.array[this.p]-1&255;break;case".":if(!String.fromCharCode(this.array[this.p]))break;this.emit("out",String.fromCharCode(this.array[this.p]));break;case",":if(this.emit("in"),this.input[this.char]===void 0){this.array[this.p]=0;break}this.array[this.p]=this.input[this.char++].charCodeAt(0);break;case"[":let t=this.i,s=0;for(;;){if(t++,!e[t])throw new Error("Out of bounds.");if(e[t]==="["&&s++,this.program[t]==="]")if(s===0){this.array[this.p]===0?this.i=t:this.loops[t]=this.i;break}else s--}break;case"]":this.array[this.p]!==0?this.i=this.loops[this.i]:this.loops[this.i];break;default:i=!0}i||this.emit("tick"),this.i++}},{key:"init",value:function(){var e=this;let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1e3;const t=function(){for(let s=0;s<i;s++)e.step();e.done||requestAnimationFrame(t)};t()}}]),a}();const{sendBotMessage:p}=l.findByProps("sendBotMessage");let h;var m={onLoad:function(){h=u.registerCommand({name:"bfeval",displayName:"bfeval",displayDescription:"Evaluate brainfuck code.",description:"Evaluate brainfuck code.",options:[{name:"code",description:"Code to evaluate.",type:3,required:!0,displayName:"code",displayDescription:"Code to evaluate."},{name:"ephemeral",displayName:"ephemeral",description:"Make outputs only be seen by you (default: true)",displayDescription:"Make outputs only be seen by you (default: true)",type:5,required:!1}],execute:y,applicationId:"-1",inputType:1,type:1})},onUnload:function(){h()}};async function y(a,e){const i=a[0].value,t=new d(i);let s="";if(t.on("out",function(n){return s+=n}),t.init(),a[1].value===!1)return{content:s};p(e.channel.id,s)}return r.default=m,Object.defineProperty(r,"__esModule",{value:!0}),r})({},vendetta.commands,vendetta.metro);
